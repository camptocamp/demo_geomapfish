diff --git a/.github/workflows/main.yaml b/.github/workflows/main.yaml
index ee9c511..840d1c1 100644
--- a/.github/workflows/main.yaml
+++ b/.github/workflows/main.yaml
@@ -12,7 +12,7 @@ env:
   HELM_RELEASE_NAMES: int-2-6,prod-2-6
 
 jobs:
-  checks:
+  main:
     runs-on: ubuntu-20.04
     name: Checks
     timeout-minutes: 10
@@ -31,58 +31,12 @@ jobs:
       - name: Checks
         run: c2cciutils-checks
 
-  config:
-    runs-on: ubuntu-20.04
-    name: Config
-    timeout-minutes: 10
-    needs: checks
-
-    steps:
-      - uses: actions/checkout@v2
-
-      - name: Build config
-        run: ./build --service=config
-
-      - uses: camptocamp/initialise-gopass-summon-action@v2
-        with:
-          ci-gpg-private-key: ${{ secrets.CI_GPG_PRIVATE_KEY }}
-          github-gopass-ci-token: ${{ secrets.GOPASS_CI_GITHUB_TOKEN }}
-          patterns: docker
-
-      - run: echo "${HOME}/.local/bin" >> ${GITHUB_PATH}
-      - run: python3 -m pip install --user --requirement=ci/requirements.txt
-
-      - name: Publish
-        run: c2cciutils-publish --group=config
-      - run: ci/trigger --image=config
-
-  geoportal:
-    runs-on: ubuntu-20.04
-    name: Geoportal
-    timeout-minutes: 10
-    needs: checks
-
-    steps:
-      - uses: actions/checkout@v1
-
-      - name: Build geoportal
-        run: ./build --service=geoportal
-        if: hashFiles('geoportal/Dockerfile') != ''
-
-      - uses: camptocamp/initialise-gopass-summon-action@v2
-        with:
-          ci-gpg-private-key: ${{ secrets.CI_GPG_PRIVATE_KEY }}
-          github-gopass-ci-token: ${{ secrets.GOPASS_CI_GITHUB_TOKEN }}
-          patterns: docker
-        if: hashFiles('geoportal/Dockerfile') != ''
+      - name: Build
+        run: ./build
 
       - run: echo "${HOME}/.local/bin" >> ${GITHUB_PATH}
-        if: hashFiles('geoportal/Dockerfile') != ''
       - run: python3 -m pip install --user --requirement=ci/requirements.txt
-        if: hashFiles('geoportal/Dockerfile') != ''
 
       - name: Publish
-        run: c2cciutils-publish --group=geoportal
-        if: hashFiles('geoportal/Dockerfile') != ''
-      - run: ci/trigger --image=geoportal
-        if: hashFiles('geoportal/Dockerfile') != ''
+        run: c2cciutils-publish
+      - run: ci/trigger
diff --git a/ci/config.yaml b/ci/config.yaml
index ff6132d..6442281 100644
--- a/ci/config.yaml
+++ b/ci/config.yaml
@@ -1,4 +1,5 @@
----
+# yaml-language-server: $schema=https://raw.githubusercontent.com/camptocamp/c2cciutils/master/c2cciutils/schema.json
+
 checks:
   black: False
   isort: False
