<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      crossorigin="anonymous"
      href="https://cdn.jsdelivr.net/npm/ol@v8.2.0/ol.css"
      integrity="sha384-PpyAaiUdY+s8ycCAmYsYkyq9cQgPWrtjtiv4/NzjY5FHo+7R5wdgdpqPAOl+No0J"
      referrerpolicy="no-referrer"
      rel="stylesheet"
    />
  </head>

  <body>
    <div id="map"></div>
    <script
      crossorigin="anonymous"
      integrity="sha384-6GMGA9e+V61Pp+99Knx9XZ3Jc1GbAflMUdNDRzC92BBmTfVO5+bjx/q1HR0hQs6L"
      referrerpolicy="no-referrer"
      src="https://cdn.jsdelivr.net/npm/ol@v8.2.0/dist/ol.js"
    ></script>
    <script
      crossorigin="anonymous"
      integrity="sha384-m5adk5PRgt3JjiYbYoG8oXxc3EgRFKc1aCBgKzyxqxnbYpdiAMlHkR0gVDp03Q/H"
      referrerpolicy="no-referrer"
      src="https://cdn.jsdelivr.net/npm/geotiff@2.1.3/dist-browser/geotiff.js"
    ></script>
    <script
      crossorigin="anonymous"
      integrity="sha512-cgJnZ1VX2G0MAN4C5OGShwI3zHhfQ6RLriXuukhblNu+T082/ZRGoWLP/0xMKObvB6AUKdnm27hQKj8hKZPjXA=="
      referrerpolicy="no-referrer"
      src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.6.2/proj4.js"
    ></script>
    <script type="text/javascript">
      const source = new ol.source.GeoTIFF({
        sources: [
          {
            url: 'https://geomapfish-demo-2-9.camptocamp.com/custom/cog/swissalti3d',
          },
        ],
      });
      proj4.defs(
        'EPSG:2056',
        '+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1' +
          ' +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs',
      );
      ol.proj.proj4.register(proj4);

      const projection = new ol.proj.Projection({
        code: 'EPSG:2056',
        units: 'm',
      });

      const sourceExtent = [2420000, 1030000, 2900000, 1350000];

      const map = new ol.Map({
        target: 'map',
        layers: [
          new ol.layer.WebGLTile({
            source,
          }),
        ],
        view: new ol.View({
          projection,
          extent: sourceExtent,
          center: ol.extent.getCenter(sourceExtent),
          zoom: 1,
        }),
      });
    </script>
  </body>
</html>
