LAYER
    NAME 'bureaux_vote'
    TYPE POLYGON
    STATUS ON
    #DEBUG 5
    TEMPLATE fooOnlyForWMSGetFeatureInfo # For GetFeatureInfo
    EXTENT 420107 5398192 442381 5412352
    CONNECTIONTYPE postgis
    PROCESSING "CLOSE_CONNECTION=DEFER" # For performance
    CONNECTION "${mapserver_connection}"
    # Example data for secured layer by restriction area
    DATA "geom FROM (SELECT geo.geom as geom, nom_bureau, gid FROM geodata.bureaux_vote AS geo, ${mapserver_join_tables} WHERE ST_Contains(${mapserver_join_area}, geo.geom) AND ${mapserver_join_where} 'bureaux_vote') AS foo USING UNIQUE gid USING srid=3857"

    DUMP TRUE # For GetFeatureInfo
    PROJECTION
      "init=epsg:3857"
    END
    #MAXSCALEDENOM 3500
    TOLERANCE 10
    OPACITY 50 
    CLASS
        NAME "Bureaux de vote"
        STYLE
          WIDTH 1
          OUTLINECOLOR 255 255 192
          COLOR 92 155 92
        END
    END

    METADATA
        "wms_title" "Bureaux de vote" # For WMS
        "wms_srs" "epsg:3857" # For WMS

        "gml_include_items" "nom_bureau"  # For GetFeatureInfo and WFS GetFeature (QuerryBuilder)
        "ows_geom_type" "polygon" # For returning geometries in GetFeatureInfo
        "ows_geometries" "geom" # For returning geometries in GetFeatureInfo

        "wms_metadataurl_href" "http://opendata.montpelliernumerique.fr/Bureaux-de-vote" # For metadata URL
        "wms_metadataurl_format" "text/html" # For metadata URL
        "wms_metadataurl_type" "TC211" # For metadata URL

        ${mapserver_layer_metadata} # For secured layers
    END
END

LAYER
    NAME 'sous_quartiers'
    TYPE POLYGON
    STATUS ON
    #DEBUG 5
    TEMPLATE fooOnlyForWMSGetFeatureInfo # For GetFeatureInfo
    EXTENT 420107 5398192 442381 5412352
    CONNECTIONTYPE postgis
    PROCESSING "CLOSE_CONNECTION=DEFER" # For performance
    CONNECTION "${mapserver_connection}"
    # Example data for secured layer by restriction area
    DATA "geom FROM (SELECT geo.geom as geom, libsquart, libquart, gid FROM geodata.sous_quartiers AS geo, ${mapserver_join_tables} WHERE ST_Contains(${mapserver_join_area}, geo.geom) AND ${mapserver_join_where} 'sous_quartiers') AS foo USING UNIQUE gid USING srid=3857"

    DUMP TRUE # For GetFeatureInfo
    PROJECTION
      "init=epsg:3857"
    END
    #MAXSCALEDENOM 3500
    TOLERANCE 10
    OPACITY 50
    LABELITEM "libsquart"
    CLASSITEM "libquart"
    CLASS
        NAME "Montpellier centre"
        EXPRESSION "MONTPELLIER CENTRE"
        STYLE
          WIDTH 0.7
          OUTLINECOLOR 100 20 20
          COLOR 200 100 100
        END
        LABEL
          COLOR  150 0 0
          OUTLINECOLOR 255 255 255
          FONT "arial"
          TYPE truetype
          SIZE 8
          POSITION auto
          PARTIALS FALSE
          MAXSCALEDENOM 35000
        END
    END
   CLASS
        NAME "Près d'arènes"
        EXPRESSION "PRES D ARENES"
        STYLE
          WIDTH 0.7
          OUTLINECOLOR 20 100 20
          COLOR 100 200 100
        END
        LABEL
          COLOR  0 150 0
          OUTLINECOLOR 255 255 255
          FONT "arial"
          TYPE truetype
          SIZE 8
          POSITION auto
          PARTIALS FALSE
          MAXSCALEDENOM 35000
        END
    END
    CLASS
        NAME "Millenaire"
        EXPRESSION "MILLENAIRE"
        STYLE
          WIDTH 0.7
          OUTLINECOLOR 20 20 100
          COLOR 100 100 200
        END
        LABEL
          COLOR  0 0 150
          OUTLINECOLOR 255 255 255
          FONT "arial"
          TYPE truetype
          SIZE 8
          POSITION auto
          PARTIALS FALSE
          MAXSCALEDENOM 35000
        END
    END
    CLASS
        NAME "Les Cévennes"
        EXPRESSION "LES CEVENNES"
        STYLE
          WIDTH 0.7
          OUTLINECOLOR 100 100 20
          COLOR 200 200 100
        END
        LABEL
          COLOR  150 150 0
          OUTLINECOLOR 255 255 255
          FONT "arial"
          TYPE truetype
          SIZE 8
          POSITION auto
          PARTIALS FALSE
          MAXSCALEDENOM 35000
        END
    END
    CLASS
        NAME "La Paillade"
        EXPRESSION "LA PAILLADE"
        STYLE
          WIDTH 0.7
          OUTLINECOLOR 100 20 100
          COLOR 200 100 200
        END
        LABEL
          COLOR  150 0 150
          OUTLINECOLOR 255 255 255
          FONT "arial"
          TYPE truetype
          SIZE 8
          POSITION auto
          PARTIALS FALSE
          MAXSCALEDENOM 35000
        END
    END
    CLASS
        NAME "Hôpitaux-Facultés "
        EXPRESSION "HOPITAUX-FACULTES"
        STYLE
          WIDTH 0.7
          OUTLINECOLOR 20 100 100
          COLOR 100 200 200
        END
        LABEL
          COLOR  0 150 150
          OUTLINECOLOR 255 255 255
          FONT "arial"
          TYPE truetype
          SIZE 8
          POSITION auto
          PARTIALS FALSE
          MAXSCALEDENOM 35000
        END
    END
    CLASS
        NAME "Croix d'argent"
        EXPRESSION "CROIX D ARGENT"
        STYLE
          WIDTH 0.7
          OUTLINECOLOR 20 20 100
          COLOR 60 60 200
        END
        LABEL
          COLOR  50 50 150 
          OUTLINECOLOR 255 255 255
          FONT "arial"
          TYPE truetype
          SIZE 8
          POSITION auto
          PARTIALS FALSE
          MAXSCALEDENOM 35000
        END
    END
    METADATA
        "wms_title" "Sous-quartiers" # For WMS
        "wms_srs" "epsg:3857" # For WMS

        "gml_include_items" ""  # For GetFeatureInfo and WFS GetFeature (QuerryBuilder)
        "ows_geom_type" "polygon" # For returning geometries in GetFeatureInfo
        "ows_geometries" "geom" # For returning geometries in GetFeatureInfo

        "wms_metadataurl_href" "http://opendata.montpelliernumerique.fr/Sous-quartiers" # For metadata URL
        "wms_metadataurl_format" "text/html" # For metadata URL
        "wms_metadataurl_type" "TC211" # For metadata URL

        ${mapserver_layer_metadata} # For secured layers
    END
END

LAYER
    NAME 'quartiers'
    TYPE POLYGON
    STATUS ON
    #DEBUG 5
    TEMPLATE fooOnlyForWMSGetFeatureInfo # For GetFeatureInfo
    EXTENT 420107 5398192 442381 5412352
    CONNECTIONTYPE postgis
    PROCESSING "CLOSE_CONNECTION=DEFER" # For performance
    CONNECTION "${mapserver_connection}"
    # Example data for secured layer by restriction area
    #DATA "geom FROM (SELECT geo.geom as geom, gid FROM geodata.quartiers AS geo, ${mapserver_join_tables} WHERE ST_Contains(${mapserver_join_area}, geo.geom) AND ${mapserver_join_where} 'quartiers') AS foo USING UNIQUE gid USING srid=3857"

    # Example data for secured layer by role (without any area)
    #DATA "geometrie FROM (SELECT geo.geom as geom FROM geodata.table AS geo WHERE %role_id% IN (${mapfile_data_noarea_subselect} 'layer_name')) as foo USING UNIQUE gid USING srid=-1"
    # Example data for public layer
    DATA "geom FROM (SELECT geo.geom as geom, libquart, gid FROM geodata.quartiers AS geo) AS foo USING UNIQUE gid USING srid=3857"

    DUMP TRUE # For GetFeatureInfo
    PROJECTION
      "init=epsg:3857"
    END
    #MAXSCALEDENOM 3500
    TOLERANCE 10
    OPACITY 50
    LABELITEM "libquart"
    CLASSITEM "libquart"
    CLASS
        NAME "Montpellier centre"
        EXPRESSION "MONTPELLIER CENTRE"
        STYLE
          WIDTH 0.7
          OUTLINECOLOR 100 20 20
          COLOR 200 100 100
        END
        LABEL
          COLOR  150 0 0
          OUTLINECOLOR 255 255 255
          FONT "arial"
          TYPE truetype
          SIZE 8
          POSITION auto
          PARTIALS FALSE
          MAXSCALEDENOM 75000
        END
    END
   CLASS
        NAME "Près d'arènes"
        EXPRESSION "PRES D'ARENE"
        STYLE
          WIDTH 0.7
          OUTLINECOLOR 20 100 20
          COLOR 100 200 100
        END
        LABEL
          COLOR  0 150 0
          OUTLINECOLOR 255 255 255
          FONT "arial"
          TYPE truetype
          SIZE 8
          POSITION auto
          PARTIALS FALSE
          MAXSCALEDENOM 75000
        END
    END
    CLASS
        NAME "Port Marianne"
        EXPRESSION "PORT MARIANNE"
        STYLE
          WIDTH 0.7
          OUTLINECOLOR 20 20 100
          COLOR 100 100 200
        END
        LABEL
          COLOR  0 0 150
          OUTLINECOLOR 255 255 255
          FONT "arial"
          TYPE truetype
          SIZE 8
          POSITION auto
          PARTIALS FALSE
          MAXSCALEDENOM 75000
        END
    END
    CLASS
        NAME "Les Cévennes"
        EXPRESSION "LES CEVENNES"
        STYLE
          WIDTH 0.7
          OUTLINECOLOR 100 100 20
          COLOR 200 200 100
        END
        LABEL
          COLOR  150 150 0
          OUTLINECOLOR 255 255 255
          FONT "arial"
          TYPE truetype
          SIZE 8
          POSITION auto
          PARTIALS FALSE
          MAXSCALEDENOM 75000
        END
    END
    CLASS
        NAME "Mosson"
        EXPRESSION "MOSSON"
        STYLE
          WIDTH 0.7
          OUTLINECOLOR 100 20 100
          COLOR 200 100 200
        END
        LABEL
          COLOR  150 0 150
          OUTLINECOLOR 255 255 255
          FONT "arial"
          TYPE truetype
          SIZE 8
          POSITION auto
          PARTIALS FALSE
          MAXSCALEDENOM 75000
        END
    END
    CLASS
        NAME "Hôpitaux-Facultés "
        EXPRESSION "HOPITAUX-FACULTES"
        STYLE
          WIDTH 0.7
          OUTLINECOLOR 20 100 100
          COLOR 100 200 200
        END
        LABEL
          COLOR  0 150 150
          OUTLINECOLOR 255 255 255
          FONT "arial"
          TYPE truetype
          SIZE 8
          POSITION auto
          PARTIALS FALSE
          MAXSCALEDENOM 75000
        END
    END
    CLASS
        NAME "Croix d'argent"
        EXPRESSION "CROIX D'ARGENT"
        STYLE
          WIDTH 0.7
          OUTLINECOLOR 20 20 100
          COLOR 60 60 200
        END
        LABEL
          COLOR  50 50 150 
          OUTLINECOLOR 255 255 255
          FONT "arial"
          TYPE truetype
          SIZE 8
          POSITION auto
          PARTIALS FALSE
          MAXSCALEDENOM 75000
        END
    END

    METADATA
        "wms_title" "Quartiers" # For WMS
        "wms_srs" "epsg:3857" # For WMS

        "gml_include_items" ""  # For GetFeatureInfo and WFS GetFeature (QuerryBuilder)
        "ows_geom_type" "polygon" # For returning geometries in GetFeatureInfo
        "ows_geometries" "geom" # For returning geometries in GetFeatureInfo

        "wms_metadataurl_href" "http://opendata.montpelliernumerique.fr/Quartiers" # For metadata URL
        "wms_metadataurl_format" "text/html" # For metadata URL
        "wms_metadataurl_type" "TC211" # For metadata URL

        ${mapserver_layer_metadata} # For secured layers
    END
END

LAYER
    NAME 'circonscription'
    TYPE POLYGON
    STATUS ON
    #DEBUG 5
    TEMPLATE fooOnlyForWMSGetFeatureInfo # For GetFeatureInfo
    EXTENT 420107 5398192 442381 5412352
    CONNECTIONTYPE postgis
    PROCESSING "CLOSE_CONNECTION=DEFER" # For performance
    CONNECTION "${mapserver_connection}"
    # Example data for secured layer by restriction area
    DATA "geom FROM (SELECT geo.geom as geom, circonscri, gid FROM geodata.circonscription AS geo, ${mapserver_join_tables} WHERE ST_Contains(${mapserver_join_area}, geo.geom) AND ${mapserver_join_where} 'circonscription') AS foo USING UNIQUE gid USING srid=3857"

    DUMP TRUE # For GetFeatureInfo
    PROJECTION
      "init=epsg:3857"
    END
    #MAXSCALEDENOM 3500
    TOLERANCE 10 
    LABELITEM "circonscri"
    OPACITY 50
    CLASS
        NAME "Circonscription"
        STYLE
          WIDTH 0.9
          OUTLINECOLOR 192 0 0
          COLOR 250 200 200
        END
        LABEL
          COLOR  150 0 0
          OUTLINECOLOR 255 255 255
          FONT "arial"
          TYPE truetype
          SIZE 8
          POSITION auto
          PARTIALS FALSE
          MAXSCALEDENOM 35000
        END

    END

    METADATA
        "wms_title" "Circonscription" # For WMS
        "wms_srs" "epsg:3857" # For WMS
        "wms_abstract" "Cette donnée (surfacique) renseigne les circonscriptions de la Ville de Montpellier. Les circonscriptions sont des divisions territoriales à des fins électorales pour des élections comme les élections municipales et législatives."
        "gml_include_items" ""  # For GetFeatureInfo and WFS GetFeature (QuerryBuilder)
        "ows_geom_type" "polygon" # For returning geometries in GetFeatureInfo
        "ows_geometries" "geom" # For returning geometries in GetFeatureInfo

        "wms_metadataurl_href" "http://opendata.montpelliernumerique.fr/Circonscriptions" # For metadata URL
        "wms_metadataurl_format" "text/html" # For metadata URL
        "wms_metadataurl_type" "TC211" # For metadata URL

        ${mapserver_layer_metadata} # For secured layers
    END
END


